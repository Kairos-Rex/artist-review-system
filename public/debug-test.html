<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠŸèƒ½è°ƒè¯•æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-100 min-h-screen py-8">
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
            <i class="fa fa-bug text-red-500"></i>
            åŠŸèƒ½è°ƒè¯•æµ‹è¯•
        </h1>
        
        <div class="space-y-4">
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <h2 class="text-lg font-semibold text-blue-800 mb-3">
                    <i class="fa fa-flask"></i>
                    åŸºç¡€åŠŸèƒ½æµ‹è¯•
                </h2>
                <div class="space-y-3">
                    <button onclick="testBasicClick()" class="w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors">
                        <i class="fa fa-mouse-pointer mr-2"></i>
                        æµ‹è¯•æŒ‰é’®ç‚¹å‡»
                    </button>
                    <button onclick="testConsoleLog()" class="w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors">
                        <i class="fa fa-terminal mr-2"></i>
                        æµ‹è¯•æ§åˆ¶å°è¾“å‡º
                    </button>
                    <button onclick="testApiConfig()" class="w-full px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors">
                        <i class="fa fa-cog mr-2"></i>
                        æµ‹è¯•APIé…ç½®è®¿é—®
                    </button>
                </div>
            </div>
            
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                <h3 class="text-lg font-semibold text-yellow-800 mb-3">
                    <i class="fa fa-exclamation-triangle"></i>
                    æµ‹è¯•ç»“æœ
                </h3>
                <div id="testResults" class="space-y-2 text-sm">
                    <p class="text-gray-600">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•...</p>
                </div>
            </div>
            
            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                <h3 class="text-lg font-semibold text-red-800 mb-3">
                    <i class="fa fa-times-circle"></i>
                    é”™è¯¯æ—¥å¿—
                </h3>
                <div id="errorLog" class="space-y-2 text-sm font-mono">
                    <p class="text-gray-600">æš‚æ— é”™è¯¯...</p>
                </div>
            </div>
            
            <div class="flex gap-3">
                <button onclick="clearResults()" class="flex-1 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors">
                    <i class="fa fa-trash mr-2"></i>
                    æ¸…é™¤ç»“æœ
                </button>
                <button onclick="goToMainPage()" class="flex-1 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors">
                    <i class="fa fa-home mr-2"></i>
                    è¿”å›ä¸»é¡µé¢
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // æ¨¡æ‹ŸAPI_CONFIGå˜é‡ï¼ˆç”¨äºæµ‹è¯•ï¼‰
        let API_CONFIG = {
            apiKey: 'test_api_key',
            botId: 'test_bot_id'
        };
        
        function addResult(message, type = 'info') {
            const resultsDiv = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = {
                'success': 'text-green-600',
                'error': 'text-red-600',
                'warning': 'text-yellow-600',
                'info': 'text-blue-600'
            }[type] || 'text-gray-600';
            
            const resultElement = document.createElement('p');
            resultElement.className = colorClass;
            resultElement.innerHTML = `[${timestamp}] ${message}`;
            
            if (resultsDiv.children[0].textContent.includes('ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®')) {
                resultsDiv.innerHTML = '';
            }
            resultsDiv.appendChild(resultElement);
        }
        
        function addError(error) {
            const errorDiv = document.getElementById('errorLog');
            const timestamp = new Date().toLocaleTimeString();
            
            const errorElement = document.createElement('p');
            errorElement.className = 'text-red-600';
            errorElement.innerHTML = `[${timestamp}] ${error}`;
            
            if (errorDiv.children[0].textContent.includes('æš‚æ— é”™è¯¯')) {
                errorDiv.innerHTML = '';
            }
            errorDiv.appendChild(errorElement);
        }
        
        function testBasicClick() {
            try {
                addResult('âœ… æŒ‰é’®ç‚¹å‡»åŠŸèƒ½æ­£å¸¸', 'success');
                addResult('âœ… JavaScriptåŸºç¡€åŠŸèƒ½æ­£å¸¸', 'success');
            } catch (error) {
                addError('æŒ‰é’®ç‚¹å‡»æµ‹è¯•å¤±è´¥: ' + error.message);
                addResult('âŒ æŒ‰é’®ç‚¹å‡»åŠŸèƒ½å¼‚å¸¸', 'error');
            }
        }
        
        function testConsoleLog() {
            try {
                console.log('æ§åˆ¶å°æµ‹è¯•æ¶ˆæ¯');
                console.warn('æ§åˆ¶å°è­¦å‘Šæµ‹è¯•');
                console.error('æ§åˆ¶å°é”™è¯¯æµ‹è¯•ï¼ˆè¿™æ˜¯æµ‹è¯•ï¼Œä¸æ˜¯çœŸå®é”™è¯¯ï¼‰');
                addResult('âœ… æ§åˆ¶å°è¾“å‡ºåŠŸèƒ½æ­£å¸¸', 'success');
                addResult('ğŸ“ è¯·æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¾“å‡º', 'info');
            } catch (error) {
                addError('æ§åˆ¶å°æµ‹è¯•å¤±è´¥: ' + error.message);
                addResult('âŒ æ§åˆ¶å°åŠŸèƒ½å¼‚å¸¸', 'error');
            }
        }
        
        function testApiConfig() {
            try {
                if (typeof API_CONFIG !== 'undefined') {
                    addResult('âœ… API_CONFIGå˜é‡å­˜åœ¨', 'success');
                    addResult(`ğŸ“‹ API Key: ${API_CONFIG.apiKey || '(ç©º)'}`, 'info');
                    addResult(`ğŸ“‹ Bot ID: ${API_CONFIG.botId || '(ç©º)'}`, 'info');
                    
                    // æµ‹è¯•ä¿®æ”¹é…ç½®
                    const originalApiKey = API_CONFIG.apiKey;
                    API_CONFIG.apiKey = 'test_modified';
                    if (API_CONFIG.apiKey === 'test_modified') {
                        addResult('âœ… APIé…ç½®å¯ä»¥æ­£å¸¸ä¿®æ”¹', 'success');
                        API_CONFIG.apiKey = originalApiKey; // æ¢å¤åŸå€¼
                    } else {
                        addResult('âŒ APIé…ç½®ä¿®æ”¹å¤±è´¥', 'error');
                    }
                } else {
                    addResult('âŒ API_CONFIGå˜é‡ä¸å­˜åœ¨', 'error');
                }
            } catch (error) {
                addError('APIé…ç½®æµ‹è¯•å¤±è´¥: ' + error.message);
                addResult('âŒ APIé…ç½®è®¿é—®å¼‚å¸¸', 'error');
            }
        }
        
        function clearResults() {
            document.getElementById('testResults').innerHTML = '<p class="text-gray-600">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•...</p>';
            document.getElementById('errorLog').innerHTML = '<p class="text-gray-600">æš‚æ— é”™è¯¯...</p>';
        }
        
        function goToMainPage() {
            window.location.href = './index(5).html';
        }
        
        // æ•è·å…¨å±€é”™è¯¯
        window.addEventListener('error', function(event) {
            addError(`å…¨å±€é”™è¯¯: ${event.error.message} (${event.filename}:${event.lineno})`);
        });
        
        // æ•è·æœªå¤„ç†çš„Promiseé”™è¯¯
        window.addEventListener('unhandledrejection', function(event) {
            addError(`æœªå¤„ç†çš„Promiseé”™è¯¯: ${event.reason}`);
        });
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡ŒåŸºç¡€æµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            addResult('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹è‡ªåŠ¨æµ‹è¯•...', 'info');
            setTimeout(() => {
                testBasicClick();
                testApiConfig();
            }, 500);
        });
    </script>
</body>
</html>